(function(t){function e(e){for(var n,r,a=e[0],l=e[1],d=e[2],h=0,u=[];h<a.length;h++)r=a[h],o[r]&&u.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(u.length)u.shift()();return s.push.apply(s,d||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={app:0},s=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/vue-network-d3/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var d=0;d<a.length;d++)e(a[d]);var c=l;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";var n=i("3d57"),o=i.n(n);o.a},"23a3":function(t,e,i){var n=i("95b4");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("85cb").default;o("d3969d80",n,!0,{sourceMap:!1,shadowMode:!1})},"3d57":function(t,e,i){var n=i("b5fe");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("85cb").default;o("d0829194",n,!0,{sourceMap:!1,shadowMode:!1})},"56d7":function(t,e,i){"use strict";i.r(e);var n=i("6e6d"),o=i("56be"),s=i.n(o),r=(i("2ed4"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("el-button",{staticClass:"setting-box-button",attrs:{icon:"el-icon-s-operation",circle:""},on:{click:function(e){t.showSettingCard=!t.showSettingCard}}}),t.showSettingCard?i("el-card",{staticClass:"setting-box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("设置")]),i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(e){t.showSettingCard=!t.showSettingCard}}},[t._v("关闭")])],1),t._v("节点大小\n    "),i("el-slider",{attrs:{"show-input":"",max:50},model:{value:t.nodeSize,callback:function(e){t.nodeSize=e},expression:"nodeSize"}}),t._v("连线宽度\n    "),i("el-slider",{attrs:{"show-input":"",max:20},model:{value:t.linkWidth,callback:function(e){t.linkWidth=e},expression:"linkWidth"}}),t._v("连线长度\n    "),i("el-slider",{attrs:{"show-input":"",max:300,step:50,"show-stops":""},model:{value:t.linkDistance,callback:function(e){t.linkDistance=e},expression:"linkDistance"}}),t._v("作用力\n    "),i("el-slider",{attrs:{"show-input":"",min:-1e3,max:0,step:50,"show-stops":""},model:{value:t.bodyStrength,callback:function(e){t.bodyStrength=e},expression:"bodyStrength"}}),i("br"),i("div",[i("el-switch",{attrs:{"active-text":"黑暗模式","inactive-text":"明亮模式"},model:{value:t.svgTheme,callback:function(e){t.svgTheme=e},expression:"svgTheme"}})],1)],1):t._e(),i("network",{attrs:{nodeList:t.nodes,linkList:t.links,nodeSize:t.nodeSize,linkWidth:t.linkWidth,linkDistance:t.linkDistance,svgTheme:t.svgTheme?"dark":"light",bodyStrength:t.bodyStrength}})],1)}),a=[],l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{width:t.svgSize.width+"px",height:t.svgSize.height+"px"},attrs:{id:"network"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.linkTextVisible,expression:"linkTextVisible"}],staticClass:"linkText",style:t.linkTextPosition,domProps:{textContent:t._s(t.linkTextContent)}}),i("svg",{style:{"background-color":t.theme.bgcolor},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:t.svgSize.width,height:t.svgSize.height},on:{click:t.clickEle,mouseover:function(e){return e.preventDefault(),t.svgMouseover(e)},mouseout:t.svgMouseout}},[i("g",{attrs:{id:"container"}},[i("g",t._l(t.links,function(e){return i("g",{key:e.index},[i("line",{class:e[t.linkTypeKey]+" "+e.selected+" link element",attrs:{stroke:t.theme.linkStroke,"stroke-width":t.linkWidth}}),t.showLinkText?i("text",{staticClass:"link-text",attrs:{dx:"0",dy:"0",fill:t.theme.textFill,"font-size":t.linkTextFrontSize}},[t._v(t._s(e[t.linkTextKey]))]):t._e()])}),0),i("g",{attrs:{id:"node-group"}},[t._l(t.nodes,function(e){return i("g",{key:e.index},[i("circle",{class:e[t.nodeTypeKey]+" "+(e.showText?"selected":"")+" node element",attrs:{fill:t.nodeColor(e[t.nodeTypeKey]),"stroke-width":-1==t.highlightNodes.indexOf(e.id)?3:10,stroke:-1==t.highlightNodes.indexOf(e.id)?t.theme.nodeStroke:"gold",r:t.nodeSize}}),i("text",{directives:[{name:"show",rawName:"v-show",value:e.showText,expression:"node.showText"}],staticClass:"node-text",attrs:{dx:t.nodeSize+5,dy:"0",fill:t.theme.textFill,"font-size":t.nodeTextFontSize}},[t._v(t._s(e[t.nodeTextKey]))])])}),i("g")],2)])])])},d=[],c=i("c5cf");DOMTokenList.prototype.indexOf=Array.prototype.indexOf;var h={name:"network",props:{nodeList:Array,linkList:Array,nodeSize:{type:Number,default:14},nodeTextKey:{type:String,default:"id"},nodeTypeKey:{type:String,default:"group"},nodeTextFontSize:{type:Number,default:14},linkWidth:{type:Number,default:2},showLinkText:{type:Boolean,default:!1},linkTextKey:{type:String,default:"value"},linkTypeKey:{type:String,default:"type"},linkTextFrontSize:{type:Number,default:10},linkDistance:{type:Number,default:50},svgSize:{type:Object,default:()=>{return{width:window.innerWidth,height:window.innerHeight}}},svgTheme:{type:String,default:"light"},bodyStrength:{type:Number,default:-150},highlightNodes:{type:Array,default:()=>{return[]}}},data(){return{selection:{links:[],nodes:[]},pinned:[],force:null,zoom:c["k"](),nodeColor:c["g"](c["h"]),linkTextVisible:!1,linkTextPosition:{top:0,left:0},linkTextContent:""}},computed:{nodes(){let t=this.nodeList.slice(),e=[];return t=t.filter(t=>{return-1===e.indexOf(t.id)&&(e.push(t.id),!0)}),t},links(){return this.linkList},theme(){return"light"===this.svgTheme?{bgcolor:"white",nodeStroke:"white",linkStroke:"lightgray",textFill:"black"}:{bgcolor:"black",nodeStroke:"white",linkStroke:"rgba(200,200,200)",textFill:"white"}}},watch:{bodyStrength:function(){this.initData(),this.$nextTick(function(){this.initDragTickZoom()})},linkDistance:function(){this.initData(),this.$nextTick(function(){this.initDragTickZoom()})},nodes:function(){this.initData(),this.$nextTick(function(){this.initDragTickZoom()})}},created(){this.initData()},mounted(){this.initDragTickZoom()},methods:{initData(){this.force=c["f"](this.nodes).force("link",c["d"](this.links).id(t=>t.id).distance(this.linkDistance)).force("charge",c["e"]().strength(this.bodyStrength)).force("center",c["c"](this.svgSize.width/2,this.svgSize.height/2))},initDragTickZoom(){c["j"](".node").call(this.drag(this.force)),this.force.on("tick",()=>{c["j"](".link").data(this.links).attr("x1",t=>t.source.x).attr("y1",t=>t.source.y).attr("x2",t=>t.target.x).attr("y2",t=>t.target.y),c["j"](".node").data(this.nodes).attr("cx",t=>t.x).attr("cy",t=>t.y),c["j"](".node-text").data(this.nodes).attr("x",t=>t.x).attr("y",t=>t.y),c["j"](".link-text").data(this.links).attr("x",t=>(t.source.x+t.target.x)/2).attr("y",t=>(t.source.y+t.target.y)/2)}),this.zoom.scaleExtent([.1,4]).on("zoom",this.zoomed),c["i"]("svg").call(this.zoom).on("dblclick.zoom",null)},clickLink(t){this.$emit("clickLink",t,t.target.__data__)},clickNode(t){0===this.pinned.length?this.pinnedState(t):(c["j"](".element").style("opacity",.2),this.pinned=[]),this.$emit("clickNode",t,t.target.__data__)},clickEle(t){"circle"===t.target.tagName?this.clickNode(t):"line"===t.target.tagName&&this.clickLink(t)},svgMouseover(t){"circle"===t.target.nodeName?(0===this.pinned.length&&this.selectedState(t),this.$forceUpdate(),this.$emit("hoverNode",t,t.target.__data__)):"line"===t.target.nodeName&&(this.linkTextPosition={left:t.clientX+"px",top:t.clientY-50+"px"},this.linkTextContent=t.target.__data__[this.linkTextKey],this.linkTextVisible=!0,this.$emit("hoverLink",t,t.target.__data__))},svgMouseout(t){this.linkTextVisible=!1,"circle"===t.target.nodeName&&(0===this.pinned.length&&this.noSelectedState(t),this.$forceUpdate())},selectedState(t){t.target.__data__.showText=!0,t.target.classList.add("selected"),this.selection.nodes.push(t.target.__data__),this.lightNeibor(t.target.__data__),c["j"](".element").style("opacity",.2)},noSelectedState(t){t.target.__data__.showText=!1,this.darkenNerbor(),c["j"](".element").style("opacity",1)},pinnedState(t){this.pinned.push(t.target.__data__.index),c["j"](".element").style("opacity",.05)},lightNeibor(t){this.links.forEach(e=>{e.source.index===t.index&&(e.selected="selected",this.selection.links.push(e),this.selection.nodes.push(e.target),this.lightNode(e.target)),e.target.index===t.index&&(e.selected="selected",this.selection.links.push(e),this.selection.nodes.push(e.source),this.lightNode(e.source))})},lightNode(t){this.nodes.forEach(e=>{e.index===t.index&&(e.showText=!0)})},darkenNerbor(){this.links.forEach(t=>{this.selection.links.forEach(e=>{e.id===t.id&&(t.selected="")})}),this.nodes.forEach(t=>{this.selection.nodes.forEach(e=>{e.id===t.id&&(t.showText=!1)})}),this.selection.nodes=[],this.selection.links=[]},zoomed(){c["i"]("#container").attr("transform","translate("+c["b"].transform.x+","+c["b"].transform.y+") scale("+c["b"].transform.k+")")},drag(t){function e(e){c["b"].active||t.alphaTarget(.3).restart(),e.fx=e.x,e.fy=e.y}function i(t){t.fx=c["b"].x,t.fy=c["b"].y}function n(e){c["b"].active||t.alphaTarget(0),e.fx=null,e.fy=null}return c["a"]().on("start",e).on("drag",i).on("end",n)}}},u=h,p=(i("bff2"),i("17cc")),f=Object(p["a"])(u,l,d,!1,null,"3b1097f2",null),g=f.exports,x=i("f753"),k=i.n(x),y={name:"app",components:{Network:g},data(){return{nodes:[],links:[],showSettingCard:!1,nodeSize:14,linkWidth:2,linkDistance:50,bodyStrength:-150,svgTheme:!1}},created(){let t="/vue-network-d3/example.json";k.a.get(t).then(t=>{this.nodes=t.data.nodes,this.links=t.data.links}).catch(t=>console.log(t))}},b=y,v=(i("034f"),Object(p["a"])(b,r,a,!1,null,null,null)),m=v.exports;n["default"].config.productionTip=!1,n["default"].use(s.a),new n["default"]({render:function(t){return t(m)}}).$mount("#app")},"95b4":function(t,e,i){e=t.exports=i("690e")(!1),e.push([t.i,".element[data-v-3b1097f2]{-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.selected[data-v-3b1097f2]{opacity:1!important}.link[data-v-3b1097f2],.node[data-v-3b1097f2]{cursor:pointer}.linkText[data-v-3b1097f2]{position:absolute;z-index:10;background-color:rgba(75,75,75,.596);border-radius:10px;color:#fff;padding:10px}",""])},b5fe:function(t,e,i){e=t.exports=i("690e")(!1),e.push([t.i,"body{margin:0}.setting-box-button{position:fixed;overflow:auto;top:20px;right:40px;border:2px solid #639}.setting-box-card{position:fixed;z-index:10;overflow:auto;top:15px;right:15px;width:500px;max-height:700px}",""])},bff2:function(t,e,i){"use strict";var n=i("23a3"),o=i.n(n);o.a}});
//# sourceMappingURL=app.57a16f9c.js.map